var t=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){!function(e){class s{constructor(t=0,e=0){this.first=null,this.items={},this.last=null,this.max=t,this.size=0,this.ttl=e}has(t){return t in this.items}clear(){return this.first=null,this.items={},this.last=null,this.size=0,this}delete(t){if(this.has(t)){const e=this.items[t];delete this.items[t],this.size--,null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}evict(){const t=this.first;return delete this.items[t.key],this.first=t.next,this.first.prev=null,this.size--,this}get(t){let e;if(this.has(t)){const s=this.items[t];this.ttl>0&&s.expiry<=(new Date).getTime()?this.delete(t):this.set(t,e=s.value,!0)}return e}keys(){return Object.keys(this.items)}set(t,e,s=!1){let i;if(s||this.has(t)){if((i=this.items[t]).value=e,this.last!==i){const t=this.last,e=i.next,s=i.prev;this.first===i&&(this.first=i.next),i.next=null,i.prev=this.last,t.next=i,null!==s&&(s.next=e),null!==e&&(e.prev=s)}}else this.max>0&&this.size===this.max&&this.evict(),i=this.items[t]={expiry:this.ttl>0?(new Date).getTime()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},1==++this.size?this.first=i:this.last.next=i;return this.last=i,this}}t.exports=function(t=1e3,e=0){if(isNaN(t)||0>t)throw new TypeError("Invalid max value");if(isNaN(e)||0>e)throw new TypeError("Invalid ttl value");return new s(t,e)}}()});const e=t=>{let e=2166136261;for(let s=0;t.length>s;s++)e^=t.charCodeAt(s),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0};var s=e;function i(t){return s(JSON.stringify(t)).toString(36)}s.default=e;export default function({size:e=100,ttl:s=0,initialState:r}={}){const n=t(e,s);return r&&Object.keys(r).map(t=>{n.set(t,r[t])}),{get:t=>n.get(i(t)),set:(t,e)=>n.set(i(t),e),delete:t=>n.delete(i(t)),clear:()=>n.clear(),keys:()=>n.keys(),getInitialState:()=>n.keys().reduce((t,e)=>({...t,[e]:n.get(e)}),{})}}
