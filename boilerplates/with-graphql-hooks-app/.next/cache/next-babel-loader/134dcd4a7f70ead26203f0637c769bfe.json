{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/ilancaster/Desktop/next-js-learning/boilerplates/with-graphql-hooks-app/components/post-upvoter.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from 'react';\nimport { useMutation } from 'graphql-hooks';\nvar UPDATE_POST = \"\\n  mutation updatePost($id: ID!, $votes: Int) {\\n    updatePost(id: $id, votes: $votes) {\\n      id\\n      __typename\\n      votes\\n    }\\n  }\\n\";\nexport default function PostUpvoter(_ref) {\n  var votes = _ref.votes,\n      id = _ref.id,\n      onUpdate = _ref.onUpdate;\n\n  var _useMutation = useMutation(UPDATE_POST),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      updatePost = _useMutation2[0];\n\n  return React.createElement(\"button\", {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return updatePost({\n                variables: {\n                  id: id,\n                  votes: votes + 1\n                }\n              });\n\n            case 3:\n              result = _context.sent;\n              onUpdate && onUpdate(result);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('error upvoting post', _context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    })),\n    className: \"jsx-852540806\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, votes, React.createElement(_JSXStyle, {\n    id: \"852540806\",\n    __self: this\n  }, \"button.jsx-852540806{background-color:transparent;border:1px solid #e4e4e4;color:#000;}button.jsx-852540806:active{background-color:transparent;}button.jsx-852540806:before{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-color:transparent transparent #000000 transparent;border-style:solid;border-width:0 4px 6px 4px;content:'';height:0;margin-right:5px;width:0;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9pbGFuY2FzdGVyL0Rlc2t0b3AvbmV4dC1qcy1sZWFybmluZy9ib2lsZXJwbGF0ZXMvd2l0aC1ncmFwaHFsLWhvb2tzLWFwcC9jb21wb25lbnRzL3Bvc3QtdXB2b3Rlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrQ2tCLEFBR3dDLEFBS0EsQUFHWCw2QkFQTyxBQUszQix5QkFKYSxXQUNiLE1BTTJELHlEQUN0QyxtQkFDUSwyQkFDaEIsV0FDRixTQUNRLGlCQUNULFFBQ1YiLCJmaWxlIjoiL1VzZXJzL2lsYW5jYXN0ZXIvRGVza3RvcC9uZXh0LWpzLWxlYXJuaW5nL2JvaWxlcnBsYXRlcy93aXRoLWdyYXBocWwtaG9va3MtYXBwL2NvbXBvbmVudHMvcG9zdC11cHZvdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlTXV0YXRpb24gfSBmcm9tICdncmFwaHFsLWhvb2tzJ1xuXG5jb25zdCBVUERBVEVfUE9TVCA9IGBcbiAgbXV0YXRpb24gdXBkYXRlUG9zdCgkaWQ6IElEISwgJHZvdGVzOiBJbnQpIHtcbiAgICB1cGRhdGVQb3N0KGlkOiAkaWQsIHZvdGVzOiAkdm90ZXMpIHtcbiAgICAgIGlkXG4gICAgICBfX3R5cGVuYW1lXG4gICAgICB2b3Rlc1xuICAgIH1cbiAgfVxuYFxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQb3N0VXB2b3RlciAoeyB2b3RlcywgaWQsIG9uVXBkYXRlIH0pIHtcbiAgY29uc3QgW3VwZGF0ZVBvc3RdID0gdXNlTXV0YXRpb24oVVBEQVRFX1BPU1QpXG5cbiAgcmV0dXJuIChcbiAgICA8YnV0dG9uXG4gICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlUG9zdCh7XG4gICAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIHZvdGVzOiB2b3RlcyArIDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgb25VcGRhdGUgJiYgb25VcGRhdGUocmVzdWx0KVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignZXJyb3IgdXB2b3RpbmcgcG9zdCcsIGUpXG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgPlxuICAgICAge3ZvdGVzfVxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICBidXR0b24ge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlNGU0ZTQ7XG4gICAgICAgICAgY29sb3I6ICMwMDA7XG4gICAgICAgIH1cbiAgICAgICAgYnV0dG9uOmFjdGl2ZSB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgYnV0dG9uOmJlZm9yZSB7XG4gICAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgIzAwMDAwMCB0cmFuc3BhcmVudDtcbiAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgICAgICAgIGJvcmRlci13aWR0aDogMCA0cHggNnB4IDRweDtcbiAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICBoZWlnaHQ6IDA7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2J1dHRvbj5cbiAgKVxufVxuIl19 */\\n/*@ sourceURL=/Users/ilancaster/Desktop/next-js-learning/boilerplates/with-graphql-hooks-app/components/post-upvoter.js */\"));\n}","map":{"version":3,"sources":["/Users/ilancaster/Desktop/next-js-learning/boilerplates/with-graphql-hooks-app/components/post-upvoter.js"],"names":["React","useMutation","UPDATE_POST","PostUpvoter","votes","id","onUpdate","updatePost","variables","result","console","error"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,eAA5B;AAEA,IAAMC,WAAW,sJAAjB;AAUA,eAAe,SAASC,WAAT,OAA+C;AAAA,MAAvBC,KAAuB,QAAvBA,KAAuB;AAAA,MAAhBC,EAAgB,QAAhBA,EAAgB;AAAA,MAAZC,QAAY,QAAZA,QAAY;;AAAA,qBACvCL,WAAW,CAACC,WAAD,CAD4B;AAAA;AAAA,MACrDK,UADqD;;AAG5D,SACE;AACE,IAAA,OAAO;AAAA;AAAA;AAAA;AAAA,6BAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEgBA,UAAU,CAAC;AAC9BC,gBAAAA,SAAS,EAAE;AACTH,kBAAAA,EAAE,EAAFA,EADS;AAETD,kBAAAA,KAAK,EAAEA,KAAK,GAAG;AAFN;AADmB,eAAD,CAF1B;;AAAA;AAECK,cAAAA,MAFD;AASLH,cAAAA,QAAQ,IAAIA,QAAQ,CAACG,MAAD,CAApB;AATK;AAAA;;AAAA;AAAA;AAAA;AAWLC,cAAAA,OAAO,CAACC,KAAR,CAAc,qBAAd;;AAXK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF,EADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAgBGP,KAhBH;AAAA;AAAA;AAAA,uzFADF;AAwCD","sourcesContent":["import React from 'react'\nimport { useMutation } from 'graphql-hooks'\n\nconst UPDATE_POST = `\n  mutation updatePost($id: ID!, $votes: Int) {\n    updatePost(id: $id, votes: $votes) {\n      id\n      __typename\n      votes\n    }\n  }\n`\n\nexport default function PostUpvoter ({ votes, id, onUpdate }) {\n  const [updatePost] = useMutation(UPDATE_POST)\n\n  return (\n    <button\n      onClick={async () => {\n        try {\n          const result = await updatePost({\n            variables: {\n              id,\n              votes: votes + 1\n            }\n          })\n\n          onUpdate && onUpdate(result)\n        } catch (e) {\n          console.error('error upvoting post', e)\n        }\n      }}\n    >\n      {votes}\n      <style jsx>{`\n        button {\n          background-color: transparent;\n          border: 1px solid #e4e4e4;\n          color: #000;\n        }\n        button:active {\n          background-color: transparent;\n        }\n        button:before {\n          align-self: center;\n          border-color: transparent transparent #000000 transparent;\n          border-style: solid;\n          border-width: 0 4px 6px 4px;\n          content: '';\n          height: 0;\n          margin-right: 5px;\n          width: 0;\n        }\n      `}</style>\n    </button>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}